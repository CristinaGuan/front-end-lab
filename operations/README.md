# 运维笔记

## vim

**注意事项：**

- 输入 `vim` 命令前需要将输入法设为英文, 否则可能会遇到输入不了命令的问题
- 默认情况下 `vim` 属于普通模式，按下 `:` 进入命令行模式，以下命令并不是都用于命令行模式的命令。如普通模式输入 `gg` 可以将光标跳到文件首行，但在命令行模式输入是不起效的，必须退出命令行模式才可以使用。
- 输入 `Esc` 恢复为普通模式。
- 命令示例中存在 `+` 的意思是组合键，比如 `Shift + g` 是同时需要按下 `Shift` 和 `g` 键。

**退出 vim:**

| 命令      | 说明                                     |
| --------- | ---------------------------------------- |
| `:q`      | 不保存文件，退出vi.                      |
| `:q!`     | 不保存文件，强制退出vi.                  |
| `:w`      | 保存文件但不退出 `vim`                   |
| `:wq`     | 保存文件并退出 `vim`                     |
| `:wq!`    | 强制保存文件，并退出 `vim`               |
| `:w!`     | 强制保存，不推出 `vim`                   |
| `:w file` | 将修改另外保存到 `file` 中，不退出 `vim` |
| `:e!`     | 放弃所有修改，从上次保存文件开始再编辑   |

**光标调整：**

| 命令                       | 说明                           |
| -------------------------- | ------------------------------ |
| `0`、`^`                   | 跳到行首                       |
| `$`                        | 跳到行尾                       |
| `:<number>`                | 直接输入数字可以跳去指定的行号 |
| `gg`、`:1`             | 跳到文件第一行行首             |
| `G`、`:$`、`Shift + G` | 跳到文件最后一行行首           |

## nginx

修改完配置后在命令行输入 `nginx -s reload` 平滑使用 nginx 配置。reload 后会启动新的进程接受新请求，对于未处理完的请求还是用旧的配置，直到所有请求处理完毕后，旧的进程进行会退出。
